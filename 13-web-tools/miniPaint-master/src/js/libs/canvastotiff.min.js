/*
 canvas-to-tiff version 1.0.0
 By Epistemex (c) 2015-2016
 www.epistemex.com
 MIT License (this header required)
*/
'use strict';var CanvasToTIFF$$module$={_dly:9,_error:null,setErrorHandler:function(f){this._error=f},toArrayBuffer:function(f,p,c){function d(a){a+="";return 1===a.length?"0"+a:a}function l(a){t.setUint16(g,a,q);g+=2}function e(a){t.setUint32(g,a,q);g+=4}function m(a){for(var h=0;h<a.length;)t.setUint8(g++,a.charCodeAt(h++)&255,q);g&1&&g++}function w(a){a=a.length;return a&1?a+1:a}function b(a,h,u,x,z){l(a);l(h);e(u);z&&(n+=z,y.push(g));1!==u||3!==h||z?e(x):(l(x),l(0));A++}function k(){t.setUint16(G,
A,q);e(0);for(var a=14+12*A,h=0,u,x;h<y.length;h++)u=y[h],x=t.getUint32(u,q),t.setUint32(u,x+a,q)}c=c||{};try{var r=f.width,C=f.height,n=0,A=0,y=[],q=!!c.littleEndian,H=+(c.dpiX||c.dpi||96)|0,I=+(c.dpiY||c.dpi||96)|0,D=f.getContext("2d").getImageData(0,0,r,C),E=D.data.length,B=new ArrayBuffer(258+E),J=new Uint8Array(B),t=new DataView(B),g=0,v=new Date;l(q?18761:19789);l(42);e(8);var G=g;g+=2;b(254,4,1,0);b(256,4,1,r);b(257,4,1,C);b(258,3,4,n,8);b(259,3,1,1);b(262,3,1,2);b(273,4,1,258,0);b(277,3,1,
4);b(279,4,1,E);b(282,5,1,n,8);b(283,5,1,n,8);b(296,3,1,2);b(305,2,19,n,w("canvas-to-tiff 0.4\x00"));b(306,2,20,n,20);b(338,3,1,2);k();e(524296);e(524296);e(H);e(1);e(I);e(1);m("canvas-to-tiff 0.4\x00");var F=v.getFullYear()+":"+d(v.getMonth()+1)+":"+d(v.getDate())+" ";F+=d(v.getHours())+":"+d(v.getMinutes())+":"+d(v.getSeconds());m(F);J.set(D.data,258);setTimeout(function(){p(B)},this._dly)}catch(a){this._error&&this._error(a.toString())}},toBlob:function(f,p,c){this.toArrayBuffer(f,function(d){p(new Blob([d],
{type:"image/tiff"}))},c||{})},toObjectURL:function(f,p,c){this.toBlob(f,function(d){p((self.URL||self.webkitURL||self).createObjectURL(d))},c||{})},toDataURL:function(f,p,c){var d=this;d.toArrayBuffer(f,function(l){var e=new Uint8Array(l),m=1048576,w="",b="",k=0,r=e.length;(function n(){for(;k<r&&0<m--;)w+=String.fromCharCode(e[k++]);k<r?(m=1048576,setTimeout(n,d._dly)):(k=0,r=w.length,m=18E4,function y(){b+=btoa(w.substr(k,m));k+=m;k<r?setTimeout(y,d._dly):p("data:image/tiff;base64,"+b)}())})()},
c||{})}},$jscompDefaultExport$$module$=CanvasToTIFF$$module$,module$={};module$.default=$jscompDefaultExport$$module$;