'use strict';const async=require("async"),spawn=require("child_process").spawn,exec=require("child_process").exec,rimraf=require("rimraf");var colors;try{colors=require("colors")}catch(a){}function log(a,b){colors&&(a=colors[b](a));console.log(a)}
async.waterfall([a=>rimraf("./assets/",{},a),a=>{if(-1==process.argv.indexOf("--webpack"))return a();log("--- Webpack Build ---","yellow");var b=spawn(process.env.windir?"webpack.cmd":"webpack",["--production","--progress","--optimize-minimize","--optimize-dedupe","--colors"]);b.stdout.on("data",c=>process.stdout.write(c));b.stderr.on("data",c=>process.stdout.write(c));b.on("exit",()=>a())}],a=>log(a?a:"--- Build finished ---",a?"red":"green"));