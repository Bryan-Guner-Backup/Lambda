<!DOCTYPE html><html><head>
      <title>bacon</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\bryan\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.5.18\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">
      
      <link rel="stylesheet" href="./prism.css">
      
      
      
      
      
      
      
 
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>

  <span class="token comment">// Detect free variables `exports`</span>
  <span class="token keyword">var</span> freeExports <span class="token operator">=</span> 
        <span class="token keyword">typeof</span> exports <span class="token operator">==</span> 
        <span class="token string">&apos;object&apos;</span> 
        <span class="token operator">&amp;&amp;</span> exports<span class="token punctuation">;</span>

  <span class="token comment">// Detect free variable `module`</span>
  <span class="token keyword">var</span> freeModule <span class="token operator">=</span> 
        <span class="token keyword">typeof</span> module <span class="token operator">==</span> 
        <span class="token string">&apos;object&apos;</span> 
        <span class="token operator">&amp;&amp;</span> module <span class="token operator">&amp;&amp;</span>
    module<span class="token punctuation">.</span><span class="token property-access">exports</span> 
        <span class="token operator">==</span> freeExports <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">;</span>

  <span class="token comment">// Detect free variable `global`, from Node.js or Browserified code,</span>
  <span class="token comment">// and use it as `root`</span>
  <span class="token keyword">var</span> freeGlobal <span class="token operator">=</span> 
        <span class="token keyword">typeof</span> global <span class="token operator">==</span> 
        <span class="token string">&apos;object&apos;</span> 
        <span class="token operator">&amp;&amp;</span> global<span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> 
        <span class="token punctuation">(</span>freeGlobal<span class="token punctuation">.</span><span class="token property-access">global</span> 
        <span class="token operator">===</span> freeGlobal <span class="token operator">||</span> freeGlobal<span class="token punctuation">.</span><span class="token property-access">window</span> 
        <span class="token operator">===</span> freeGlobal<span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
    root <span class="token operator">=</span> freeGlobal<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/*--------------------------------------------------------------------------*/</span>

  <span class="token keyword">var</span> 
        <span class="token constant">DEFAULT_ALPHABET</span> 
        <span class="token operator">=</span> 
        <span class="token string">&apos;ABCDEFGHIKLMNOPQRSTUWXYZ&apos;</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> 
        <span class="token function-variable function">decode</span> 
        <span class="token operator">=</span> 
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ciphertext<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
    ciphertext <span class="token operator">=</span> ciphertext<span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Use the most common 24-letter Bacon alphabet by default.</span>
    <span class="token keyword">var</span> alphabet <span class="token operator">=</span> options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span><span class="token property-access">alphabet</span> 
        <span class="token operator">!=</span> 
        <span class="token keyword null nil">null</span> 
        <span class="token operator">?</span>
      options<span class="token punctuation">.</span><span class="token property-access">alphabet</span><span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
        <span class="token operator">:</span>
      <span class="token constant">DEFAULT_ALPHABET</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> 
        <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> length <span class="token operator">=</span> ciphertext<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> space <span class="token operator">=</span> 
        <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> 
        <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> buffer <span class="token operator">=</span> 
        <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> symbol<span class="token punctuation">;</span>
    <span class="token keyword">var</span> alphabetIndex<span class="token punctuation">;</span>
    <span class="token keyword control-flow">while</span> 
        <span class="token punctuation">(</span><span class="token operator">++</span>index <span class="token operator">&lt;</span> length<span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
      symbol <span class="token operator">=</span> ciphertext<span class="token punctuation">.</span><span class="token method function property-access">charAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">if</span> 
        <span class="token punctuation">(</span>symbol <span class="token operator">==</span> 
        <span class="token string">&apos;A&apos;</span> 
        <span class="token operator">||</span> symbol <span class="token operator">==</span> 
        <span class="token string">&apos;B&apos;</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
        buffer<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> 
        <span class="token keyword control-flow">else</span> 
        <span class="token punctuation">{</span>
        <span class="token comment">// Prepare a space to be added to the output.</span>
        space <span class="token operator">=</span> 
        <span class="token string">&apos; &apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword control-flow">if</span> 
        <span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token property-access">length</span> 
        <span class="token operator">==</span> 
        <span class="token number">5</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
        alphabetIndex <span class="token operator">=</span> 
        <span class="token punctuation">(</span>
          <span class="token punctuation">(</span>buffer<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> 
        <span class="token operator">==</span> 
        <span class="token string">&apos;A&apos;</span> 
        <span class="token operator">?</span> 
        <span class="token number">0</span> 
        <span class="token operator">:</span> 
        <span class="token number">0x10</span><span class="token punctuation">)</span> 
        <span class="token operator">+</span> 
        <span class="token comment">// 0b10000</span>
          <span class="token punctuation">(</span>buffer<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> 
        <span class="token operator">==</span> 
        <span class="token string">&apos;A&apos;</span> 
        <span class="token operator">?</span> 
        <span class="token number">0</span> 
        <span class="token operator">:</span> 
        <span class="token number">0x08</span><span class="token punctuation">)</span> 
        <span class="token operator">+</span> 
        <span class="token comment">// 0b01000</span>
          <span class="token punctuation">(</span>buffer<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> 
        <span class="token operator">==</span> 
        <span class="token string">&apos;A&apos;</span> 
        <span class="token operator">?</span> 
        <span class="token number">0</span> 
        <span class="token operator">:</span> 
        <span class="token number">0x04</span><span class="token punctuation">)</span> 
        <span class="token operator">+</span> 
        <span class="token comment">// 0b00100</span>
          <span class="token punctuation">(</span>buffer<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> 
        <span class="token operator">==</span> 
        <span class="token string">&apos;A&apos;</span> 
        <span class="token operator">?</span> 
        <span class="token number">0</span> 
        <span class="token operator">:</span> 
        <span class="token number">0x02</span><span class="token punctuation">)</span> 
        <span class="token operator">+</span> 
        <span class="token comment">// 0b00010</span>
          <span class="token punctuation">(</span>buffer<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> 
        <span class="token operator">==</span> 
        <span class="token string">&apos;A&apos;</span> 
        <span class="token operator">?</span> 
        <span class="token number">0</span> 
        <span class="token operator">:</span> 
        <span class="token number">0x01</span><span class="token punctuation">)</span>   <span class="token comment">// 0b00001</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        buffer <span class="token operator">=</span> 
        <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        result <span class="token operator">+=</span> 
        <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token property-access">length</span> 
        <span class="token operator">?</span> space <span class="token operator">:</span> 
        <span class="token string">&apos;&apos;</span><span class="token punctuation">)</span> 
        <span class="token operator">+</span> alphabet<span class="token punctuation">.</span><span class="token method function property-access">charAt</span><span class="token punctuation">(</span>alphabetIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        space <span class="token operator">=</span> 
        <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> 
        <span class="token function-variable function">encode</span> 
        <span class="token operator">=</span> 
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">string<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
    string <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> alphabet<span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> 
        <span class="token punctuation">(</span>options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span><span class="token property-access">alphabet</span> 
        <span class="token operator">!=</span> 
        <span class="token keyword null nil">null</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
      alphabet <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token property-access">alphabet</span><span class="token punctuation">.</span><span class="token method function property-access">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
        <span class="token keyword control-flow">else</span> 
        <span class="token punctuation">{</span>
      <span class="token comment">// Use the most common 24-letter Bacon alphabet by default.</span>
      alphabet <span class="token operator">=</span> 
        <span class="token constant">DEFAULT_ALPHABET</span><span class="token punctuation">;</span>
      string <span class="token operator">=</span> string
        <span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">J</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> 
        <span class="token string">&apos;I&apos;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">V</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> 
        <span class="token string">&apos;U&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> 
        <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> length <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> alphabetIndex<span class="token punctuation">;</span>
    <span class="token keyword">var</span> space <span class="token operator">=</span> 
        <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> 
        <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">while</span> 
        <span class="token punctuation">(</span><span class="token operator">++</span>index <span class="token operator">&lt;</span> length<span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
      alphabetIndex <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token method function property-access">charAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword control-flow">if</span> 
        <span class="token punctuation">(</span>alphabetIndex <span class="token operator">&gt;</span> 
        <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
        result <span class="token operator">+=</span> space <span class="token operator">+</span> 
        <span class="token punctuation">(</span>
          <span class="token punctuation">(</span>alphabetIndex <span class="token operator">&amp;</span> 
        <span class="token number">0x10</span> 
        <span class="token operator">?</span> 
        <span class="token string">&apos;B&apos;</span> 
        <span class="token operator">:</span> 
        <span class="token string">&apos;A&apos;</span><span class="token punctuation">)</span> 
        <span class="token operator">+</span> 
        <span class="token comment">// 0b10000</span>
          <span class="token punctuation">(</span>alphabetIndex <span class="token operator">&amp;</span> 
        <span class="token number">0x08</span> 
        <span class="token operator">?</span> 
        <span class="token string">&apos;B&apos;</span> 
        <span class="token operator">:</span> 
        <span class="token string">&apos;A&apos;</span><span class="token punctuation">)</span> 
        <span class="token operator">+</span> 
        <span class="token comment">// 0b01000</span>
          <span class="token punctuation">(</span>alphabetIndex <span class="token operator">&amp;</span> 
        <span class="token number">0x04</span> 
        <span class="token operator">?</span> 
        <span class="token string">&apos;B&apos;</span> 
        <span class="token operator">:</span> 
        <span class="token string">&apos;A&apos;</span><span class="token punctuation">)</span> 
        <span class="token operator">+</span> 
        <span class="token comment">// 0b00100</span>
          <span class="token punctuation">(</span>alphabetIndex <span class="token operator">&amp;</span> 
        <span class="token number">0x02</span> 
        <span class="token operator">?</span> 
        <span class="token string">&apos;B&apos;</span> 
        <span class="token operator">:</span> 
        <span class="token string">&apos;A&apos;</span><span class="token punctuation">)</span> 
        <span class="token operator">+</span> 
        <span class="token comment">// 0b00010</span>
          <span class="token punctuation">(</span>alphabetIndex <span class="token operator">&amp;</span> 
        <span class="token number">0x01</span> 
        <span class="token operator">?</span> 
        <span class="token string">&apos;B&apos;</span> 
        <span class="token operator">:</span> 
        <span class="token string">&apos;A&apos;</span><span class="token punctuation">)</span>   <span class="token comment">// 0b00001</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        space <span class="token operator">=</span> 
        <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> 
        <span class="token keyword control-flow">else</span> 
        <span class="token keyword control-flow">if</span> 
        <span class="token punctuation">(</span>index<span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
        <span class="token comment">// Prepare a space to be added to the output, unless it&apos;s leading space.</span>
        space <span class="token operator">=</span> 
        <span class="token string">&apos; &apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> bacon <span class="token operator">=</span> 
        <span class="token punctuation">{</span>
    <span class="token string">&apos;encode&apos;</span><span class="token operator">:</span> encode<span class="token punctuation">,</span>
    <span class="token string">&apos;decode&apos;</span><span class="token operator">:</span> decode<span class="token punctuation">,</span>
    <span class="token string">&apos;version&apos;</span><span class="token operator">:</span> 
        <span class="token string">&apos;0.1.0&apos;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// Some AMD build optimizers, like r.js, check for specific condition patterns</span>
  <span class="token comment">// like the following:</span>
  <span class="token keyword control-flow">if</span> 
        <span class="token punctuation">(</span>
    <span class="token keyword">typeof</span> define <span class="token operator">==</span> 
        <span class="token string">&apos;function&apos;</span> 
        <span class="token operator">&amp;&amp;</span>
    <span class="token keyword">typeof</span> define<span class="token punctuation">.</span><span class="token property-access">amd</span> 
        <span class="token operator">==</span> 
        <span class="token string">&apos;object&apos;</span> 
        <span class="token operator">&amp;&amp;</span>
    define<span class="token punctuation">.</span><span class="token property-access">amd</span>
  <span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> bacon<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>  <span class="token keyword control-flow">else</span> 
        <span class="token keyword control-flow">if</span> 
        <span class="token punctuation">(</span>freeExports <span class="token operator">&amp;&amp;</span> 
        <span class="token operator">!</span>freeExports<span class="token punctuation">.</span><span class="token property-access">nodeType</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> 
        <span class="token punctuation">(</span>freeModule<span class="token punctuation">)</span> 
        <span class="token punctuation">{</span> 
        <span class="token comment">// in Node.js or RingoJS v0.8.0+</span>
      freeModule<span class="token punctuation">.</span><span class="token property-access">exports</span> 
        <span class="token operator">=</span> bacon<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
        <span class="token keyword control-flow">else</span> 
        <span class="token punctuation">{</span> 
        <span class="token comment">// in Narwhal or RingoJS v0.7.0-</span>
      <span class="token keyword control-flow">for</span> 
        <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> bacon<span class="token punctuation">)</span> 
        <span class="token punctuation">{</span>
        bacon<span class="token punctuation">.</span><span class="token method function property-access">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> 
        <span class="token operator">&amp;&amp;</span> 
        <span class="token punctuation">(</span>freeExports<span class="token punctuation">[</span>key<span class="token punctuation">]</span> 
        <span class="token operator">=</span> bacon<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> 
        <span class="token keyword control-flow">else</span> 
        <span class="token punctuation">{</span> 
        <span class="token comment">// in Rhino or a web browser</span>
    root<span class="token punctuation">.</span><span class="token property-access">bacon</span> 
        <span class="token operator">=</span> bacon<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</pre>
      </div>
      <div class="md-sidebar-toc"></div>
      <a id="sidebar-toc-btn">&#x2261;</a>
    
    
    
    
    
    
    
    
<script>

var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>
      
  
    </body></html>
